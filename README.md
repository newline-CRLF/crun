# crun

`crun`は、**C/C++ソースファイルを指定するだけで自動的にコンパイル＆実行**できる、Windows用のシンプルなコマンドラインツールです。  
Pythonのような手軽さでC/C++プログラムを試したい方に最適です。

---

## 特徴

- `.c`または`.cpp`ファイルを指定するだけで自動的にコンパイル＆実行
- MinGW (gcc/g++) を利用（PATHが通っている必要あり）
- 一時ディレクトリでビルドし、実行後に自動削除（`--keep-temp`で保持可能）
- 追加のコンパイルオプションや詳細出力（`--verbose`）もサポート
- プログラム引数の指定も可能
- 標準入出力・エラーはそのまま親プロセスに引き継がれます

---

## インストール

1. [MinGW-w64](https://www.mingw-w64.org/) をインストールしてください。
    - インストール時、「gcc.exe」「g++.exe」がインストールされていることを確認してください。
2. MinGWの`bin`ディレクトリ（例: `C:\mingw-w64\bin`）を**PATH環境変数**に追加してください。
    - コマンドプロンプトで `gcc --version` や `g++ --version` が動作すればOKです。
3. `crun.exe`を任意のディレクトリに配置し、そのディレクトリもPATHに追加すると便利です。

---

## 使い方

```sh
crun <ソースファイル> [プログラム引数...] [オプション...]
```

- `<ソースファイル>`: `.c`または`.cpp`ファイルを指定
- `[プログラム引数...]`: 実行するプログラムに渡す引数（任意）
- `[オプション...]`: crunの動作を制御するオプション（後述）

### 例

```sh
crun hello.c
crun app.cpp arg1 arg2 --verbose
crun math.c --cflags "-O2 -lm"
crun test.cpp --keep-temp
```

---

## オプション一覧

| オプション                | 説明                                    |
|--------------------------|-----------------------------------------|
| `--help`                 | ヘルプを表示                            |
| `--version`              | バージョン情報を表示                    |
| `--cflags "<flags>"`     | 追加のコンパイルフラグを指定             |
| `--keep-temp`            | 実行後も一時ディレクトリを削除しない     |
| `--verbose`, `-v`        | 詳細な出力を有効化                       |

- オプションは**どの位置でも指定可能**です（例: `crun --verbose hello.c` もOK）。
- `--cflags`の直後にフラグ文字列を指定してください（例: `--cflags "-Wall -O2"`）。

---

## 動作の流れ

1. ソースファイルの存在と拡張子（`.c`/`.cpp`）をチェック
2. 一時ディレクトリを作成し、そこにビルド
3. MinGWの`gcc.exe`または`g++.exe`でコンパイル
4. 実行ファイルを生成し、指定した引数で実行
5. 終了後、一時ディレクトリを自動削除（`--keep-temp`指定時は保持）

---

## 注意事項

- **対応ファイル**: `.c`または`.cpp`のみ対応しています。
- **MinGW必須**: MinGW (gcc/g++) のインストールとPATH設定が必要です。
- **管理者権限不要**: 通常のユーザー権限で動作します。
- **一時ディレクトリ**: ソースファイルと同じディレクトリ内に`crun_tmp_...`という一時ディレクトリを作成します。
- **エラー時の挙動**: コンパイルエラーや実行エラー時はエラーメッセージを表示し、終了コード1で終了します。
- **日本語ファイル名**: 日本語やスペースを含むパスにも対応しています。

---

## よくある質問

### Q. MinGWが見つからないと言われる

A. `gcc.exe`や`g++.exe`がPATHに含まれているか確認してください。  
コマンドプロンプトで `gcc --version` が動作すればOKです。

### Q. 一時ディレクトリが消えない

A. `--keep-temp`オプションを指定した場合や、異常終了時に残ることがあります。不要な場合は手動で削除してください。

### Q. どのコンパイラが使われますか？

A. `.c`ファイルは`gcc.exe`、`.cpp`ファイルは`g++.exe`が自動的に選択されます。

### Q. 標準入力や標準出力はどうなりますか？

A. crun自身の標準入出力・エラーは、実行したプログラムにそのまま引き継がれます。

---

## ライセンス

MITライセンス

---
